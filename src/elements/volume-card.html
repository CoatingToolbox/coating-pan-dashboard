
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../elements/coating-pan-graphic.html">
<link rel="import" href="../redux-mixin.html">

<dom-module id='volume-card'>
    <template>
        <style>
            :host {
                display: flex;
                background-color: white;
                border-radius: 4px;
                box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                          0 1px 5px 0 rgba(0, 0, 0, 0.12),
                          0 3px 1px -2px rgba(0, 0, 0, 0.2);
                flex-grow: 1;
            }
            #text-container {
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                padding: 16px 0px 16px 16px;
            }
            #value-container {
                flex-grow: 1;
                align-self: center;
                display: flex;
                align-items: center;
            }
            #value {
                padding: 16px;
                color: var(--app-dark-color);
                @apply --paper-font-display1;
            }
            coating-pan-graphic {
                margin: 8px;
                --pan-size: 124px;
                /*--pan-fill-color: var(--app-primary-color);*/
            }
            
            :host(.iron-selected) coating-pan-graphic {
                --pan-fill-color: var(--app-accent-color);
            }
            
        </style>
    
        
        
        <div id='text-container'>
            <div id='title'>[[label]] Volume</div>
            <div id='value-container'>
                <div id='value'>[[value]] L</div>
            </div>
        </div>
        
        <coating-pan-graphic view='front' volume-type='[[type]]'></coating-pan-graphic>
        
        
    </template>
    
    <script>
        class VolumeCard extends ReduxMixin(Polymer.Element) {
            static get is() { return 'volume-card';}
            
            static get properties() { 
                return {
                    type: {type: String, value: 'brim'},
                    label: {type: String}, 
                    pan: {type: Object, statePath: 'pan'},
                    value: {type: Number, computed: '_computeValue(type, pan)'}
                };
            }
                
            _computeValue(type, pan) {
                if(!pan || !type) {return;}
                
                let v;
                switch(type) {
                    case 'min': 
                        v = pan.minFillVolume;
                        break;
                    case 'max':
                        v = pan.maxFillVolume;
                        break;
                    case 'brim':
                        v = pan.brimVolume;
                        break;
                    default: 
                        v = 0;
                        break;
                }
                
                return (v / 0.001).toFixed(1); 
            }
        }
        window.customElements.define(VolumeCard.is, VolumeCard);
    </script>
    
</dom-module>